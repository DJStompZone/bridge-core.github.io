{"hash":"33e57ce81afb31a16d831bc6e0e40776dd057607","data":{"markdownPage":{"id":"9cdf6d2602c5f9000f12b7599b49eb27","title":"Custom Commands","description":"","path":"/plugin-docs/custom-commands/","timeToRead":1,"content":"<h1 id=\"custom-commands\"><a href=\"#custom-commands\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Custom Commands</h1>\n<h2 id=\"general\"><a href=\"#general\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>General</h2>\n<p>bridge. allows you to define new commands that can be used in mcfunction files. In order to get started, create a <code>commands/</code> folder inside of your project or a <code>&#x3C;PLUGIN NAME>/commands</code> inside of your plugin folder and place a first JavaScript (.js) file inside of it. The name of the file does not matter.</p>\n<h2 id=\"execution-scope\"><a href=\"#execution-scope\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Execution Scope</h2>\n<p>JavaScript files placed inside of this folder have access to the <code>Bridge</code> object. Available methods:</p>\n<ul>\n<li><code>Bridge.register(command: ? extends BridgeCommand)</code>: Registers a custom command. This method expects a JavaScript class with a static property <code>command_name</code> and the three instance methods <code>onApply(commandArgs)</code>, <code>onPropose()</code> and <code>onCacheHook(commandArgs)</code>.</li>\n<li><code>Bridge.registerSelector(selectorId: string, parser: (selector: string, selectorArgs: string[]) =>[string, string[])</code>: Registers a custom selector parser</li>\n<li><code>Bridge.insertAutoCompletions(path: string, definition: JSONObject)</code>: Modifies the exisiting auto-completion library</li>\n<li><code>Bridge.createFunction(path: string, fileContent: string)</code>: Creates a new function file</li>\n<li><code>Bridge.readFunction(path: string): Promise&#x3C;string></code>: Reads a function file</li>\n</ul>\n<h3 id=\"onapplycommandargs-string-string--string\"><a href=\"#onapplycommandargs-string-string--string\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>onApply(commandArgs: string[]): string | string[]</code></h3>\n<p><code>onApply(commandArgs)</code> receives all arguments a user calls the command with (<code>commandArgs</code>). The method must return a string or a string array.</p>\n<h3 id=\"onpropose-jsonobject\"><a href=\"#onpropose-jsonobject\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>onPropose(): JSONObject</code></h3>\n<p><code>onPropose()</code> must return an auto-completion object. It should only have one property (named your custom command name) which should replicate the structure of the command. <a href=\"/plugin-docs/auto-completions/\">Read more about bridge.'s auto-completion JSON format.</a></p>\n<h3 id=\"oncachehookcommandargs-string-string-string\"><a href=\"#oncachehookcommandargs-string-string-string\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a><code>onCacheHook(commandArgs: string[]): [[string, [string]]]</code></h3>\n<p><code>onCacheHook(commandArgs)</code> allows you to add data to bridge.'s lightning cache. Implementation of this method is optional.</p>\n<h2 id=\"example\"><a href=\"#example\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Example</h2>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token maybe-class-name\">Bridge</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">register</span><span class=\"token punctuation\">(</span>\n\t<span class=\"token keyword\">class</span> <span class=\"token class-name\">Command</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">static</span> command_name <span class=\"token operator\">=</span> <span class=\"token string\">'setupTags'</span>\n\n\t\t<span class=\"token function\">onApply</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">[</span>selector<span class=\"token punctuation\">,</span> <span class=\"token spread operator\">...</span>tags<span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> tags<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">t</span> <span class=\"token arrow operator\">=></span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">tag </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>selector<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> add </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>t<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token function\">onPropose</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token punctuation\">[</span><span class=\"token maybe-class-name\">Command</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">command_name</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t<span class=\"token string\">'$function.general.target_selector'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre>\n","sidebar":"plugins","next":"","prev":"","author":null,"headings":[{"depth":1,"value":"Custom Commands","anchor":"#custom-commands"},{"depth":2,"value":"General","anchor":"#general"},{"depth":2,"value":"Execution Scope","anchor":"#execution-scope"},{"depth":3,"value":"onApply(commandArgs: string[]): string | string[]","anchor":"#onapplycommandargs-string-string--string"},{"depth":3,"value":"onPropose(): JSONObject","anchor":"#onpropose-jsonobject"},{"depth":3,"value":"onCacheHook(commandArgs: string[]): [[string, [string]]]","anchor":"#oncachehookcommandargs-string-string-string"},{"depth":2,"value":"Example","anchor":"#example"}],"fileInfo":{"path":"plugin-docs/custom-commands.md"}},"allMarkdownPage":{"edges":[{"node":{"path":"/plugin-docs/other/styles/","title":"Styles"}},{"node":{"path":"/plugin-docs/other/default-file-types/","title":"Default File Types"}},{"node":{"path":"/plugin-docs/other/common-types/","title":"Common Types"}},{"node":{"path":"/plugin-docs/modules/windows/","title":"@bridge/windows"}},{"node":{"path":"/plugin-docs/modules/utils/","title":"@bridge/utils"}},{"node":{"path":"/plugin-docs/modules/ui/","title":"@bridge/ui"}},{"node":{"path":"/plugin-docs/modules/toolbar/","title":"@bridge/toolbar"}},{"node":{"path":"/plugin-docs/modules/sidebar/","title":"@bridge/sidebar"}},{"node":{"path":"/plugin-docs/modules/path/","title":"@bridge/path"}},{"node":{"path":"/plugin-docs/modules/","title":"Plugin Modules"}},{"node":{"path":"/plugin-docs/modules/globals/","title":"@bridge/globals"}},{"node":{"path":"/plugin-docs/modules/fs/","title":"@bridge/fs"}},{"node":{"path":"/plugin-docs/modules/footer/","title":"@bridge/notification"}},{"node":{"path":"/plugin-docs/modules/file-importer/","title":"@bridge/file-importer"}},{"node":{"path":"/plugin-docs/modules/fetch-definition/","title":"@bridge/fetch-definition"}},{"node":{"path":"/plugin-docs/modules/env/","title":"@bridge/env"}},{"node":{"path":"/plugin-docs/modules/compare-versions/","title":"@bridge/compare-versions"}},{"node":{"path":"/plugin-docs/json/themes/","title":"Themes"}},{"node":{"path":"/plugin-docs/json/snippets/","title":"Snippets"}},{"node":{"path":"/plugin-docs/json/presetsv2/","title":"Presets v2"}},{"node":{"path":"/plugin-docs/json/presets/","title":"Presets"}},{"node":{"path":"/plugin-docs/json/lightning-cache/","title":"Lightning Cache"}},{"node":{"path":"/plugin-docs/json/file-definitions/","title":"File Definitions"}},{"node":{"path":"/plugin-docs/auto-completions/","title":"Auto-Completions"}},{"node":{"path":"/plugin-docs/auto-completions/dynamic-references/","title":"Dynamic References"}},{"node":{"path":"/editor-docs/other/molang/","title":"MoLang"}},{"node":{"path":"/editor-docs/getting-started/","title":"Getting Started"}},{"node":{"path":"/editor-docs/faq/","title":"FAQ"}},{"node":{"path":"/plugin-docs/","title":"Plugin API"}},{"node":{"path":"/plugin-docs/custom-components/","title":"Custom Components"}},{"node":{"path":"/plugin-docs/custom-commands/","title":"Custom Commands"}},{"node":{"path":"/plugin-docs/contributing/","title":"Contributing Plugins"}},{"node":{"path":"/editor-docs/no-cache/","title":"No Cache File"}},{"node":{"path":"/editor-docs/","title":"Editor"}},{"node":{"path":"/editor-docs/features/","title":"Feature Overview"}}]}},"context":{}}